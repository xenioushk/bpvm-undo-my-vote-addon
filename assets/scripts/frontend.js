!function(){"use strict";var t={n:function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,{a:a}),a},d:function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e=jQuery,a=t.n(e);new class{constructor(){0!=a()(".bwl_pvm_container").length&&(null==this.umv_getCookie("bpvm_umv")&&this.umv_setCookie("bpvm_umv","1","1"),this.events())}events(){a()(document).on("click",".bpvm_undo_vote",this.cbUndoMyVote.bind(this))}cbUndoMyVote(t){t.preventDefault();var e=a()(t.target),n=this.umv_getCookie("bpvm_umv"),o=e.data("umv_max_count");if(n>o)return alert("WARNING: You are allowed to UNDO "+o+" votes in a day!"),!1;this.umv_setCookie("bpvm_umv",parseInt(n)+parseInt(1,10),"1");var r=e.data("bpvm_data_id"),i=e.data("post_id"),_=e.data("post_type"),s=e.data("vote_type"),v=e.data("vote_date"),d=e.closest("section").find(".btn_like"),u=d.attr("bpvm_unique_id"),m=(d.attr("post_id"),a()("#pvm_btn_container_"+u)),p=m.parent("section"),c=a()("#stat-cnt-"+u),l=c.find(".total-vote-counter"),f=c.find(".dislike-count-container"),b=c.find(".like-count-container"),h=c.data("result_percentage");p.addClass("pvm_overlay"),m.find(".msg_container").remove(),m.find('div[class*="btn_"]').show(),a()("#pvm_feedback_form_"+u).slideUp();var k=new Array,y=new Array;k=[r,1,s,v],y.push(k),a().when(this.bpvm_remove_data(_,i,y)).done((function(t){var e=t.total_likes,a=t.total_dislikes,n=parseInt(e,10)+parseInt(a,10);1==h&&(a=100-(e=this.umv_percentage_calculator(e,n)),e+="%",a+="%"),b.find("span").html(e),f.find("span").html(a),l.find("span").html(n),p.removeClass("pvm_overlay")}))}bpvm_remove_data(t,e,n){var o="",r="";if(a()(".pvm_dynamic_sort_wrapper").length>0){var i=a()(".pvm_dynamic_sort_wrapper"),_=1;o=i.data("start"),r=i.data("end")}return a().ajax({type:"POST",url:ajaxurl+"?action=bpvm_delete_vote_data",data:{post_type:t,post_id:e,bpvm_data_stack:n,bpvm_undo_vote:1,tfa:_,tfa_vis:o,tfa_vie:r},dataType:"JSON"})}umv_setCookie(t,e,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3),document.cookie=t+"="+e+";expires="+n.toUTCString()}umv_getCookie(t){var e=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return e?e[2]:null}umv_eraseCookie(t){this.umv_setCookie(t,null,"1")}umv_percentage_calculator(t,e){return Math.ceil(100*t/e,10)}}}();